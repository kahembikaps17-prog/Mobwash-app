<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Steam Press | MobWash</title>

    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/styles.css/global.css" />
    <link rel="stylesheet" href="css/styles.css/ironing.css" />
  </head>

  <body class="press-page">
    <header class="press-header">
      <a href="profile.html" class="press-back" aria-label="Back to hub">
        <i class="bx bx-left-arrow-alt"></i>
      </a>

      <div class="press-hero">
        <div class="press-icon">
          <i class="bx bxs-hot"></i>
        </div>
        <div class="press-title">
          <h1>Steam Press Only</h1>
          <p>Sharp creases. Zero shine. Executive-level finishing.</p>
        </div>
      </div>

      <div class="press-badges">
        <span class="badge"
          ><i class="bx bx-shield-quarter"></i> Fiber-safe</span
        >
        <span class="badge"
          ><i class="bx bx-time-five"></i> Priority slots</span
        >
        <span class="badge"
          ><i class="bx bx-check-double"></i> Quality check</span
        >
      </div>
    </header>

    <main class="press-main">
      <section class="panel">
        <div class="panel-head">
          <h3>Select Executive Attire</h3>
          <p>Choose items to press. Total updates instantly.</p>
        </div>

        <div class="items-grid selection-grid">
          <!-- ITEM -->
          <label class="item-card">
            <input
              type="checkbox"
              data-price="85"
              data-name="Bespoke Suit Jacket"
            />
            <div class="item-ui">
              <div class="item-top">
                <i class="bx bxs-award"></i>
                <span class="price-pill">K85</span>
              </div>
              <strong>Bespoke Suit Jacket</strong>
              <span>Shoulder & lapel precision</span>
            </div>
          </label>

          <label class="item-card">
            <input
              type="checkbox"
              data-price="85"
              data-name="Formal Trousers"
            />
            <div class="item-ui">
              <div class="item-top">
                <i class="bx bx-vertical-center"></i>
                <span class="price-pill">K85</span>
              </div>
              <strong>Formal Trousers</strong>
              <span>Knife-edge crease</span>
            </div>
          </label>

          <label class="item-card">
            <input type="checkbox" data-price="85" data-name="Pleated Skirts" />
            <div class="item-ui">
              <div class="item-top">
                <i class="bx bxs-layer"></i>
                <span class="price-pill">K85</span>
              </div>
              <strong>Pleated Skirts</strong>
              <span>Individual fold steaming</span>
            </div>
          </label>

          <label class="item-card">
            <input type="checkbox" data-price="85" data-name="Silk Blouses" />
            <div class="item-ui">
              <div class="item-top">
                <i class="bx bxs-droplet"></i>
                <span class="price-pill">K85</span>
              </div>
              <strong>Silk Blouses</strong>
              <span>Low-heat fiber protection</span>
            </div>
          </label>

          <label class="item-card">
            <input type="checkbox" data-price="85" data-name="Cotton Oxford" />
            <div class="item-ui">
              <div class="item-top">
                <i class="bx bxs-check-shield"></i>
                <span class="price-pill">K85</span>
              </div>
              <strong>Cotton Oxford</strong>
              <span>Crisp collar finish</span>
            </div>
          </label>

          <label class="item-card">
            <input type="checkbox" data-price="85" data-name="French Shirts" />
            <div class="item-ui">
              <div class="item-top">
                <i class="bx bxs-diamond"></i>
                <span class="price-pill">K85</span>
              </div>
              <strong>French Shirts</strong>
              <span>Double-cuff expert press</span>
            </div>
          </label>

          <label class="item-card">
            <input type="checkbox" data-price="85" data-name="Linen Blazers" />
            <div class="item-ui">
              <div class="item-top">
                <i class="bx bx-sun"></i>
                <span class="price-pill">K85</span>
              </div>
              <strong>Linen Blazers</strong>
              <span>Anti-wrinkle treatment</span>
            </div>
          </label>

          <label class="item-card">
            <input type="checkbox" data-price="85" data-name="Trench Refresh" />
            <div class="item-ui">
              <div class="item-top">
                <i class="bx bxs-cloud-rain"></i>
                <span class="price-pill">K85</span>
              </div>
              <strong>Trench Refresh</strong>
              <span>Structural steam setting</span>
            </div>
          </label>

          <label class="item-card">
            <input type="checkbox" data-price="85" data-name="Waistcoats" />
            <div class="item-ui">
              <div class="item-top">
                <i class="bx bxs-user-badge"></i>
                <span class="price-pill">K85</span>
              </div>
              <strong>Waistcoats</strong>
              <span>Symmetry verification</span>
            </div>
          </label>

          <label class="item-card">
            <input type="checkbox" data-price="85" data-name="Wool Overcoats" />
            <div class="item-ui">
              <div class="item-top">
                <i class="bx bxs-thermometer"></i>
                <span class="price-pill">K85</span>
              </div>
              <strong>Wool Overcoats</strong>
              <span>Deep fiber steam</span>
            </div>
          </label>

          <label class="item-card">
            <input type="checkbox" data-price="85" data-name="Academic Gowns" />
            <div class="item-ui">
              <div class="item-top">
                <i class="bx bxs-graduation"></i>
                <span class="price-pill">K85</span>
              </div>
              <strong>Academic Gowns</strong>
              <span>Ceremonial standard</span>
            </div>
          </label>

          <label class="item-card">
            <input type="checkbox" data-price="85" data-name="Chef Whites" />
            <div class="item-ui">
              <div class="item-top">
                <i class="bx bxs-dish"></i>
                <span class="price-pill">K85</span>
              </div>
              <strong>Chef Whites</strong>
              <span>Sanitized high-heat</span>
            </div>
          </label>

          <label class="item-card">
            <input
              type="checkbox"
              data-price="85"
              data-name="Military Uniform"
            />
            <div class="item-ui">
              <div class="item-top">
                <i class="bx bxs-medal"></i>
                <span class="price-pill">K85</span>
              </div>
              <strong>Military Uniform</strong>
              <span>Regulatory precision</span>
            </div>
          </label>

          <label class="item-card">
            <input type="checkbox" data-price="85" data-name="Silk Scarves" />
            <div class="item-ui">
              <div class="item-top">
                <i class="bx bx-wind"></i>
                <span class="price-pill">K85</span>
              </div>
              <strong>Silk Scarves</strong>
              <span>Delicate air-dry press</span>
            </div>
          </label>

          <label class="item-card">
            <input type="checkbox" data-price="85" data-name="Drape Steaming" />
            <div class="item-ui">
              <div class="item-top">
                <i class="bx bx-unite"></i>
                <span class="price-pill">K85</span>
              </div>
              <strong>Drape Steaming</strong>
              <span>Vertical gravity finish</span>
            </div>
          </label>
        </div>
      </section>

      <section class="panel">
        <div class="panel-head">
          <h3>Specific Service Brief</h3>
          <p>Add preferences (starch, crease rules, heat sensitivity).</p>
        </div>

        <div class="instruction-card">
          <div class="instruction-top">
            <i class="bx bx-edit-alt"></i>
            <strong>Tailoring Instructions</strong>
          </div>
          <textarea
            id="notes"
            placeholder="e.g. Starch collars heavily, no crease on sleeves..."
          ></textarea>
          <div class="instruction-bottom">
            Your preferences are our blueprint.
          </div>
        </div>
      </section>

      <section class="panel">
        <div class="panel-head">
          <h3>Logistics</h3>
          <p>Set pickup location and time. Hours: 06:00 to 18:00.</p>
        </div>

        <div class="logistics">
          <label class="luxury-field">
            <span class="field-label">Collection Point</span>
            <input
              type="text"
              id="address"
              placeholder="Enter Location"
              required
            />
          </label>

          <div class="scheduling-container">
            <label class="luxury-field">
              <span class="field-label">Date</span>
              <input type="date" id="pickup-date" required />
              <i class="bx bx-calendar-alt field-ico"></i>
            </label>

            <label class="luxury-field">
              <span class="field-label">Time</span>
              <input type="time" id="pickup-time" required />
              <i class="bx bx-time-five field-ico"></i>
            </label>
          </div>
        </div>
      </section>

      <section class="checkout">
        <div class="checkout-left">
          <div class="mini-row">
            <span><i class="bx bx-shopping-bag"></i> Items</span>
            <strong id="summary-items">None Selected</strong>
          </div>
          <div class="mini-row">
            <span><i class="bx bx-map-pin"></i> Location</span>
            <strong id="summary-location">Not Set</strong>
          </div>
          <div class="mini-row">
            <span><i class="bx bx-calendar-event"></i> Schedule</span>
            <strong id="summary-logistics">Select Date & Time</strong>
          </div>
        </div>

        <div class="checkout-right">
          <div class="total">
            <span>Estimated Total</span>
            <strong id="grand-total">K0.00</strong>
          </div>

          <button class="execute-btn" id="order-pickup-btn" type="button">
            Confirm Priority Order
          </button>
        </div>
      </section>

      <section class="panel reviews">
        <div class="panel-head">
          <h3>Executive Feedback</h3>
          <p>What members say about Steam Press.</p>
        </div>

        <div class="review-card">
          <div class="review-head">
            <div class="review-user">
              <div class="avatar">SM</div>
              <div>
                <strong>Sterling M.</strong>
                <small>Platinum Member</small>
              </div>
            </div>
            <div class="stars">
              <i class="bx bxs-star"></i><i class="bx bxs-star"></i
              ><i class="bx bxs-star"></i><i class="bx bxs-star"></i
              ><i class="bx bxs-star"></i>
            </div>
          </div>

          <p class="review-body">
            “The preservation of my vintage gala wear was impeccable. They
            handled metallic fibers and hand-stitching with precision I haven’t
            found elsewhere.”
          </p>
        </div>
      </section>
    </main>

    <!-- SUCCESS OVERLAY -->
    <div class="success-overlay" id="luxSuccessOverlay" aria-hidden="true">
      <div class="success-card">
        <div class="success-hero">
          <i class="bx bx-check"></i>
        </div>

        <h2>Order Secured</h2>
        <p>
          Your Steam Press request is confirmed. A senior valet is being
          assigned.
        </p>

        <a class="track-btn" href="track-order.html">
          Track Collection <i class="bx bx-right-arrow-alt"></i>
        </a>

        <button class="close-btn" type="button" id="closeSuccess">
          Back to Hub
        </button>
      </div>
    </div>

    <script src="js/global.js"></script>

    <!-- Keep this inline or move to js/ironing-logic.js -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const checks = document.querySelectorAll(
          '.selection-grid input[type="checkbox"]',
        );
        const summaryItems = document.getElementById("summary-items");
        const grandTotal = document.getElementById("grand-total");
        const orderBtn = document.getElementById("order-pickup-btn");

        const addressInput = document.getElementById("address");
        const dateInput = document.getElementById("pickup-date");
        const timeInput = document.getElementById("pickup-time");

        const summaryLocation = document.getElementById("summary-location");
        const summaryLogistics = document.getElementById("summary-logistics");

        const overlay = document.getElementById("luxSuccessOverlay");
        const closeBtn = document.getElementById("closeSuccess");

        function timeWithinHours(t) {
          if (!t) return false;
          const [hh] = t.split(":").map(Number);
          return hh >= 6 && hh <= 18;
        }

        function updateSummary() {
          let total = 0;
          const names = [];

          checks.forEach((cb) => {
            if (!cb.checked) return;
            const name =
              cb.dataset.name ||
              cb.closest(".item-card")?.querySelector("strong")?.innerText;
            const price = parseFloat(cb.dataset.price || "0");
            if (name) names.push(name);
            total += isNaN(price) ? 0 : price;
          });

          summaryItems.textContent = names.length
            ? names.join(", ")
            : "None Selected";
          grandTotal.textContent = `K${total.toFixed(2)}`;

          summaryLocation.textContent = addressInput.value.trim() || "Not Set";

          if (dateInput.value && timeInput.value) {
            summaryLogistics.textContent = `${dateInput.value} @ ${timeInput.value}`;
          } else {
            summaryLogistics.textContent = "Select Date & Time";
          }

          const ready =
            names.length > 0 &&
            addressInput.value.trim() &&
            dateInput.value &&
            timeInput.value;

          orderBtn.disabled = !ready;
        }

        // Operational hours guard (popup)
        timeInput.addEventListener("change", () => {
          if (timeInput.value && !timeWithinHours(timeInput.value)) {
            alert("Our operating hours are only from 06:00 to 18:00.");
            timeInput.value = "";
          }
          updateSummary();
        });

        checks.forEach((cb) => cb.addEventListener("change", updateSummary));
        addressInput.addEventListener("input", updateSummary);
        dateInput.addEventListener("change", updateSummary);

        orderBtn.addEventListener("click", () => {
          if (orderBtn.disabled) return;

          overlay.classList.add("active");
          overlay.setAttribute("aria-hidden", "false");

          // Reset page after order is placed
          setTimeout(() => {
            checks.forEach((cb) => (cb.checked = false));
            addressInput.value = "";
            dateInput.value = "";
            timeInput.value = "";
            const notes = document.getElementById("notes");
            if (notes) notes.value = "";
            updateSummary();
          }, 300);

          if ("vibrate" in navigator) navigator.vibrate(60);
        });

        closeBtn?.addEventListener("click", () => {
          overlay.classList.remove("active");
          overlay.setAttribute("aria-hidden", "true");
          window.location.href = "profile.html";
        });

        // Close overlay if user taps outside card
        overlay.addEventListener("click", (e) => {
          if (e.target === overlay) {
            overlay.classList.remove("active");
            overlay.setAttribute("aria-hidden", "true");
          }
        });

        updateSummary();
      });
    </script>

    <script type="module" src="js/maintenance-check.js"></script>
  </body>
</html>
